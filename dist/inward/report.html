<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>工作汇报</title>
</head>

<body>
<div id="errorShow"></div>
<div id="content">
    <div>
        <h3>网址</h3>
        <ul>
            <li>
                <a href="http://120.27.22.41:8081" target='_blank'>中产者静态网页(mc-web-app)</a>
            </li>
            <li>
                <a href="http://120.27.22.41:9093" target='_blank'>中产者后台接口(mc-rest-app)</a>
            </li>
            <li>
                <a href="http://120.27.22.41:9091" target='_blank'>基础服务-文件系统(oss-rest-app)</a>
            </li>
        </ul>
    </div>
    <div id="images">
        <h3>图片</h3>
    </div>
    <div id="video">
        <h3>视频</h3>
    </div>
</div>
</body>
</html>
<script type="text/javascript" src="../js/plugins/jquery.min.js"></script>
<script type="text/javascript" src="../js/urlHandler.js"></script>
<script type="text/javascript">
$(document).ready(function(){

    $.ajax({
        url: 'http://120.27.22.41:9091/fileInfo/all',
        type: 'GET',
        success: function (data) {
            var $ul_img = $("<ul/>");
            var $ul_video = $("<ul/>");
            $.each(data.data, function(i,item){
                if(item.preview == "report"){
                    if(item.category == "picture"){
                        var url_img = "detail.html?md5=" + item.md5 + "&name=" + item.name + "&category=" + item.category;
                        var $li = $("<li/>").html("<a href='"+url_img+"' target='_blank'>"+item.name+"</a>");
                        $ul_img.append($li);
                    }
                    if(item.category == "video"){
                        var url_video = "detail.html?md5=" + item.md5 + "&name=" + item.name + "&category=" + item.category;
                        var $li = $("<li/>").html("<a href='"+url_video+"' target='_blank'>"+item.name+"</a>");
                        $ul_video.append($li);
                    }
                }
            });
            $("#images").append($ul_img);
            $("#video").append($ul_video);
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            // 通常 textStatus 和 errorThrown 之中
            // 只有一个会包含信息
            this; // 调用本次AJAX请求时传递的options参数
            $("<h3/>    ").html(XMLHttpRequest).appendTo("#errorShow");
            $("<h3/>").html(textStatus).appendTo("#errorShow");
            $("<h3/>").html(errorThrown).appendTo("#errorShow");
        }
    });


});
</script>